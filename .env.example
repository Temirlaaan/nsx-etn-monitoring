# ============================================
# NSX-T Manager Configuration
# ============================================
NSX_MANAGER_URL=https://nsx01cast.t-cloud.kz
NSX_USERNAME=admin
NSX_PASSWORD=your_password_here

# ============================================
# ETN SSH Credentials
# ============================================
ETN_SSH_USERNAME=admin
ETN_SSH_PASSWORD=your_etn_password_here
ETN_SSH_PORT=22

# ============================================
# Keycloak Configuration (OAuth 2.0 / OIDC)
# ============================================
# Включить/отключить аутентификацию через Keycloak
# true = требуется вход через Keycloak
# false = открытый доступ без авторизации (для тестирования)
KEYCLOAK_ENABLED=true

# URL вашего Keycloak сервера
KEYCLOAK_SERVER_URL=https://sso-ttc.t-cloud.kz

# Realm в Keycloak (обычно prod-v1 или master)
KEYCLOAK_REALM=prod-v1

# Client ID (создается в Keycloak Admin Console)
KEYCLOAK_CLIENT_ID=etn-monitor

# Client Secret (берется из Keycloak Admin Console -> Clients -> etn-monitor -> Credentials)
KEYCLOAK_CLIENT_SECRET=your_keycloak_client_secret_here

# URL для callback после авторизации (должен совпадать с Valid Redirect URIs в Keycloak)
FRONTEND_CALLBACK_URL=https://web-etn-mon.t-cloud.kz/callback

# ============================================
# Telegram Configuration
# ============================================
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_chat_id_here

# ============================================
# Scheduler Configuration (cron format)
# ============================================
# Проверка NSX каждые 2 дня в 02:00
# Формат: минута час день_месяца месяц день_недели
NSX_CHECK_CRON=0 2 */2 * *

# Проверка сертификатов каждую неделю в понедельник в 03:00
CERT_CHECK_CRON=0 3 * * 1

# ============================================
# Certificate Settings
# ============================================
# За сколько дней до истечения отправлять предупреждения
CERT_WARNING_DAYS=30

# ============================================
# ETN Filtering (optional)
# ============================================
# Оставьте пустым для мониторинга всех ETN
# Или укажите через запятую конкретные IP для тестирования
# Пример: ETN_WHITELIST=10.11.35.7,10.11.35.8,10.11.35.2,10.11.35.11
ETN_WHITELIST=

# ============================================
# Database
# ============================================
# SQLite база данных (путь внутри Docker контейнера)
DATABASE_URL=sqlite+aiosqlite:////data/etn_monitor.db

# ============================================
# Web Server
# ============================================
WEB_HOST=0.0.0.0
WEB_PORT=8000

# ============================================
# Notes:
# ============================================
# 1. Keycloak Client создается в: https://sso-ttc.t-cloud.kz/admin/
# 2. Valid Redirect URIs в Keycloak должен быть: https://web-etn-mon.t-cloud.kz/*
# 3. Для отключения авторизации: KEYCLOAK_ENABLED=false
# 4. После изменения .env нужно перезапустить: docker-compose restart